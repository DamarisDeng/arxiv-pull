---
name: validate-artifacts
description: Verifies that pipeline artifacts (data/papers.json, data/analysis.json, docs/index.html) are complete and well-formed before proceeding to the next step or deploying. Use this skill before any deployment step.
---

## Validation Checklist

Run the following checks before proceeding to deployment.

### `data/papers.json`
- [ ] File exists and is non-empty
- [ ] Valid JSON — parses without errors
- [ ] Top-level value is an array (may be empty `[]` if no papers today)
- [ ] Each object has all required fields: `id`, `title`, `authors`, `published_date`, `abstract`, `pdf_link`, `categories`, `affiliations`
- [ ] `published_date` values are within the last 4 days (3-day retention window + buffer)
- [ ] `affiliations` is an array of strings (may contain `"Unknown"`)

### `data/analysis.json`
- [ ] File exists and is non-empty
- [ ] Valid JSON — parses without errors
- [ ] Top-level value is an array with the same length as `papers.json`
- [ ] Each object contains all fields from `papers.json` plus: `tldr`, `keywords`, `relevance_score`
- [ ] All original fields including `affiliations` are preserved
- [ ] `relevance_score` is an integer between 0 and 10 inclusive
- [ ] `keywords` is an array of at most 5 strings
- [ ] Array is sorted by `relevance_score` descending

### `docs/index.html`
- [ ] File exists and is non-empty
- [ ] Contains `<!DOCTYPE html>` declaration
- [ ] Contains a `<title>` element
- [ ] Contains today's UTC date in the header
- [ ] Paper count in header matches length of `analysis.json`
- [ ] Contains the footer text "Generated by Q-Bio Watchtower"

## Failure Action

If any check fails, report the specific failed check(s) and halt. Do not deploy until all checks pass.
